# Подготовка к использованию библиотеки

## Оглавление
- [Введение](./../readme.md)
- [Варианты использования](./use-case.md)
- [Преимущества от использования](./benefits.md)
- [Подготовка к использованию](./preparatory-steps.md)
- [Архитектура](./inner-workings.md)
- [Дополнительные материалы](./additional.md)

## Создать пользователя для работы с БД

1. Создать базу данных в СУБД PostgreSQL 9+ ;
2. Подключиться к СУБД и созданной БД;
3. Выполнить скрипт `/configuration/install-tables.sql.example`, в
БД будут созданы таблицы необходимые для записи и чтения данных;
4. Создать пользователя СУБД для работы с БД от имени библиотеки; 
5. Пользователь должен иметь права на создание представлений,
материализованных представлений и таблиц, соответственно на CRUD
операции с этими объектами БД;

### Как проверить работоспособность
Библиотека для работы с СУБД использует PDO. Тесты используют
реквизиты подключения к СУБД из файла
`/корень библиотеки/configuration/pdo.env`.

Соответственно для запуска тестов вам необходимо создать файл с именем
`pdo.env`, расположенный по пути `/корень библиотеки/configuration/`.
Либо можно заменить в тестах код реализующий создание подключения,
для этого вы можете найти следующий строки:
```php
        $pathParts = [
            __DIR__,
            '..',
            '..',
            'configuration',
            'pdo.env',
        ];
        $path = implode(DIRECTORY_SEPARATOR, $pathParts);
        $linkToData = (new PdoConnection($path))->get();
```
И их заменить на такие:
```php
        $linkToData = new PDO('pgsql:dbname=all_things;host=localhost');
```
Если вы решите создать собственный конфигурационный файл
(`/configuration/pdo.env`), то за основу можно взять
`/configuration/pdo.env.example`.